---
outline: deep
lastUpdated: true
---


# Analog-to-Digital Conversion (ADC)


## Introduction

### What Is an ADC?
An Analog-to-Digital Converter samples a continuous (analog) voltage and produces a discrete (digital) number. The TM4C123 microcontroller provides:
- Resolution: 12 bits (0-4095)
- Reference Voltage (Vref): Typically 3.3 V (can vary if externally configured)
- Multiple analog input channels (AN0-AN11) mapped to specific GPIO pins
- 4 Sample Sequencers (SS0-SS3) with different depths (SS3: 1 sample, SS2: 4, SS1: 4, SS0: 8)
- 2 ADC modules (ADC0, ADC1) sharing the same input pins.

#### ADC Input Channel Mapping

| ADC Channel | AN0 | AN1 | AN2 | AN3 | AN4 | AN5 | AN6 | AN7 | AN8 | AN9 | AN10 | AN11 |
|-------------|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|------|------|
| Pin         | PE3 | PE2 | PE1 | PE0 | PD3 | PD2 | PD1 | PD0 | PE5 | PE4 | PB4  | PB5  |



### Key Concepts
- Sampling: Capturing the analog value at a specific instant (sample rate must satisfy Nyquist criteria for varying signals)
- Quantization: Mapping the sampled voltage to one of 2^12 discrete codes
- Resolution (LSB size): Vref / 4096. For Vref = 3.3 V â‡’ ~0.000805 V per count
- Conversion Formula: Voltage = (Result * Vref) / 4095

### Sequencers
Each Sample Sequencer:
- Collects one or more samples into a FIFO
- Can be triggered by: processor, timer, PWM, comparator, GPIO, always, etc.
- Is configured via:
  - EMUX (event trigger)
  - SSMUXn (channel selection)
  - SSCTLn (end/sample interrupt control)
  - IM (interrupt mask)
  - ACTSS (enable/disable)


### Simplified Polling Flow
1. Enable clocks: ADC + GPIO (for analog pin)
2. Configure GPIO pin as analog input:
   - Disable digital (DEN)
   - Enable alternate function & analog mode (AFSEL/AMSEL)
3. Disable target sample sequencer
4. Set trigger source (processor for simplest)
5. Select input channel in SSMUXn
6. Configure SSCTLn (END0 | IE0)
7. Enable sample sequencer
8. Start conversion (PSSI)
9. Poll RIS or check FIFO not empty
10. Read SSFIFOx
11. Clear interrupt (ISC)
12. Convert to voltage

### Interrupt-Driven Flow Differences
- Enable interrupt in ADC IM
- Enable NVIC interrupt line
- ISR reads FIFO, clears flag, processes data


### Sample Voltage Conversion (C)
```c
float voltage = (sample * 3.3f) / 4095.0f;
```

### Choosing Polling vs Interrupt
- Polling: Simpler, CPU waits or loops
- Interrupt: Efficient for periodic or multi-channel sampling
- Timer-trigger + interrupt: Deterministic sampling rate

| Mode          | Pros                       | Cons                     | Use When                          |
|---------------|----------------------------|--------------------------|-----------------------------------|
| Polling       | Simple, predictable order  | CPU busy-wait            | Single slow sensor                |
| Interrupt     | CPU free between samples   | Slight overhead          | Periodic sampling / display tasks |
| Timer + ADC   | Stable sampling frequency  | More setup               | Signal analysis / filtering       |



## Examples

### Polling ADC
<<< @/snippets/adc/example1.c

### Interrupt-Driven ADC
<<< @/snippets/adc/example2.c

---

## Tasks

### Task 1: LED Control Based on ADC Value
Modify the polling example so that:
   - RED LED ON only when ADC value > 1000
   - GREEN LED ON only when ADC value <= 1000

### Task 2: Display ADC Value and Voltage on LCD
Modify the interrupt-based example so both raw value and computed voltage are displayed on the LCD in the form:
```
ADC: 767
Voltage: 2.474
```